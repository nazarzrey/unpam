<html>
    <title>Contoh</title>
    <body>
        <h1>Test send absen</h1>
        <div id="result">hasil</div>
    </body>
</html>
<script>
    // var url = window.location.href
    var url = window.location.href;
    var objek = [[{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"38127","waktu":"Monday, 26 February 2024, 5:35 PM"},{"nama":"ICTHIAR FERDY YULISTIAWAN 231011450115-55201-E","postid":"66849","waktu":"Monday, 26 February 2024, 8:57 PM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"628734","waktu":"Wednesday, 28 February 2024, 10:21 PM"},{"nama":"MAULANA ROYYAN TSUBAISA 231011450122-55201-E","postid":"67011","waktu":"Monday, 26 February 2024, 8:58 PM"},{"nama":"MAULANA ROYYAN TSUBAISA 231011450122-55201-E","postid":"68898","waktu":"Monday, 26 February 2024, 9:08 PM"},{"nama":"ARYA PRATAMA 231011450640-55201-E","postid":"87228","waktu":"Monday, 26 February 2024, 10:37 PM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"1402764","waktu":"Saturday, 2 March 2024, 9:52 PM"},{"nama":"MANARUL HIDAYAH 231011450126-55201-E","postid":"246915","waktu":"Tuesday, 27 February 2024, 4:34 PM"},{"nama":"NAZA RUDIN 231011450485-55201-E","postid":"491691","waktu":"Wednesday, 28 February 2024, 2:05 PM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"922347","waktu":"Thursday, 29 February 2024, 11:18 PM"},{"nama":"AHMAD PAISAL 231011450105-55201-E","postid":"71850","waktu":"Monday, 26 February 2024, 9:22 PM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"1403634","waktu":"Saturday, 2 March 2024, 9:55 PM"},{"nama":"MANARUL HIDAYAH 231011450126-55201-E","postid":"83454","waktu":"Monday, 26 February 2024, 10:18 PM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"923370","waktu":"Thursday, 29 February 2024, 11:21 PM"},{"nama":"MAESTRO ARJUNA SAKTI 231011450113-55201-E","postid":"86091","waktu":"Monday, 26 February 2024, 10:32 PM"},{"nama":"NAZA RUDIN 231011450485-55201-E","postid":"88923","waktu":"Monday, 26 February 2024, 10:45 PM"},{"nama":"ARYA PRATAMA 231011450640-55201-E","postid":"88968","waktu":"Monday, 26 February 2024, 10:45 PM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"1404450","waktu":"Saturday, 2 March 2024, 9:57 PM"},{"nama":"ILHAM FAUZI 231011450300-55201-E","postid":"90825","waktu":"Monday, 26 February 2024, 10:54 PM"},{"nama":"DALPA KHOIRUN NISA 231011450736-55201-E","postid":"101739","waktu":"Monday, 26 February 2024, 11:48 PM"},{"nama":"ANDI BAGJA DINATA 231011450261-55201-E","postid":"102105","waktu":"Monday, 26 February 2024, 11:50 PM"},{"nama":"SHEVCENKO RADJARTHA 231011450438-55201-E","postid":"142845","waktu":"Tuesday, 27 February 2024, 8:48 AM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"1405038","waktu":"Saturday, 2 March 2024, 9:59 PM"},{"nama":"MUHAMAD AZID 231011450407-55201-E","postid":"185511","waktu":"Tuesday, 27 February 2024, 11:53 AM"},{"nama":"MUHAMAD FIKRI FERDIANSYAH 231011450293-55201-E","postid":"222177","waktu":"Tuesday, 27 February 2024, 2:38 PM"},{"nama":"MOCH SANDI 231011450111-55201-E","postid":"225675","waktu":"Tuesday, 27 February 2024, 2:54 PM"},{"nama":"MOCH SANDI 231011450111-55201-E","postid":"226221","waktu":"Tuesday, 27 February 2024, 2:57 PM"},{"nama":"ILAN ALFIAN FAZA 231011450686-55201-E","postid":"1082568","waktu":"Friday, 1 March 2024, 4:12 PM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"1406193","waktu":"Saturday, 2 March 2024, 10:03 PM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"1406592","waktu":"Saturday, 2 March 2024, 10:05 PM"},{"nama":"MUHAMAD ABDUL YAZKY ZAELANI 231011450456-55201-E","postid":"9186188","waktu":"Friday, 22 March 2024, 3:05 PM"},{"nama":"MOCH SANDI 231011450111-55201-E","postid":"619941","waktu":"Wednesday, 28 February 2024, 9:59 PM"},{"nama":"PRADEWA MUSTOFA 231011450727-55201-E","postid":"254280","waktu":"Tuesday, 27 February 2024, 5:10 PM"},{"nama":"PRADEWA MUSTOFA 231011450727-55201-E","postid":"254991","waktu":"Tuesday, 27 February 2024, 5:13 PM"},{"nama":"MOCH SANDI 231011450111-55201-E","postid":"614487","waktu":"Wednesday, 28 February 2024, 9:45 PM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"1406889","waktu":"Saturday, 2 March 2024, 10:06 PM"},{"nama":"MUHAMMAD RIFA`I AKBAR SAPUTRO 231011450414-55201-E","postid":"1436343","waktu":"Sunday, 3 March 2024, 6:35 PM"},{"nama":"MUHAMMAD RIDWAN 231011450611-55201-E","postid":"312552","waktu":"Tuesday, 27 February 2024, 9:04 PM"},{"nama":"ADITYA ALBANI 231011450129-55201-E","postid":"312576","waktu":"Tuesday, 27 February 2024, 9:04 PM"},{"nama":"CAHYO YOGI PRAYOGO 231011450127-55201-E","postid":"321849","waktu":"Tuesday, 27 February 2024, 9:29 PM"},{"nama":"VICKY PRIYADI 231011450110-55201-E","postid":"328557","waktu":"Tuesday, 27 February 2024, 9:47 PM"},{"nama":"AFIQ NUR IZZA ADDAKHIL 231011450119-55201-E","postid":"483060","waktu":"Wednesday, 28 February 2024, 1:33 PM"},{"nama":"DESI RAHMAWATI 231011450252-55201-E","postid":"617685","waktu":"Wednesday, 28 February 2024, 9:53 PM"},{"nama":"ILAN ALFIAN FAZA 231011450686-55201-E","postid":"887544","waktu":"Thursday, 29 February 2024, 9:41 PM"},{"nama":"ARDIANSYAH 231011450107-55201-E","postid":"892095","waktu":"Thursday, 29 February 2024, 9:53 PM"},{"nama":"FAUZAN HANIF ILYASA 231011450444-55201-E","postid":"1012404","waktu":"Friday, 1 March 2024, 11:09 AM"},{"nama":"ALVIS JULIANDRY 231011450312-55201-E","postid":"1272501","waktu":"Saturday, 2 March 2024, 8:02 AM"},{"nama":"MUHAMMAD ILHAM ARDIANSYAH 231011450716-55201-E","postid":"1378239","waktu":"Saturday, 2 March 2024, 8:17 PM"},{"nama":"MUHAMMAD ILHAM ARDIANSYAH 231011450716-55201-E","postid":"1379049","waktu":"Saturday, 2 March 2024, 8:21 PM"},{"nama":"SRI WAHYUNI S.Pd.I., M.Pd.I Dosen-01870","postid":"1407591","waktu":"Saturday, 2 March 2024, 10:08 PM"},{"nama":"MUHAMMAD RIFA`I AKBAR SAPUTRO 231011450414-55201-E","postid":"1436262","waktu":"Sunday, 3 March 2024, 6:31 PM"},{"nama":"MUH FATHURRAHMAN 231011450661-55201-E","postid":"1442490","waktu":"Sunday, 3 March 2024, 10:28 PM"},{"nama":"MUH FATHURRAHMAN 231011450661-55201-E","postid":"1442550","waktu":"Sunday, 3 March 2024, 10:30 PM"},{"nama":"MUHAMMAD ZAHAVY AL ZENITA 231011450125-55201-E","postid":"1526760","waktu":"Monday, 4 March 2024, 2:06 PM"},{"nama":"MUHAMMAD ZAHAVY AL ZENITA 231011450125-55201-E","postid":"1526943","waktu":"Monday, 4 March 2024, 2:07 PM"},{"nama":"ROYAN ALFA REZZA 231011450102-55201-E","postid":"2023727","waktu":"Wednesday, 6 March 2024, 5:27 AM"},{"nama":"ARDIANSYAH 231011450107-55201-E","postid":"4692024","waktu":"Tuesday, 12 March 2024, 1:17 PM"},{"nama":"MUHAMAD ABDUL YAZKY ZAELANI 231011450456-55201-E","postid":"9186191","waktu":"Friday, 22 March 2024, 3:05 PM"}],[{"fordistitle":"Makna Manusia"},{"fordiske":"FORUM DISKUSI 1"}]]
    var kls = "TPLE004";
    var adm = "zre";
    send_data(objek,url,kls,adm);
    function send_data(obj_data,url,kls,adm){
        console.log(url);
        if (Object.keys(obj_data).length === 0 && obj_data.constructor === Object) {
            console.log("Data is empty, skipping the send request.");
            return;
        }
        var UriServer = 'http://localhost/web/unpam_project/absen_ci3_backend/receive_data';
        //var UriServer = "https://nazrey.com/project/unpam/absen_ci3_backend/receive_data";
        fetch(UriServer, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                url: url,
                data: obj_data[0],
                fordis: obj_data[1],
                kelas:kls,
                admin:adm
            })
        })
        /*.then(data => {
            console.log(data);
            console.log('Data sent successfully.');
            console.log('Response from server:', data); // Menampilkan respons dari server
        })*/
        // fetch('https://api.example.com/data')
        .then(response => response.json())
        .then(data => {
            const message = data.message;
            console.log(message); // Output: "Data sudah ada."
            const element = document.getElementById("result");
            element.innerHTML = message;
        })
        // .catch(error => console.error('Error:', error));
        // .then(response => {            
        //     const element = document.getElementById("result");
        //     // element.innerHTML = response.text();
        //     // console.log(response.text());
        //     if (!response.ok) {
        //         throw new Error('Failed to send data to server.');
        //     }
        //     console.log(response.text());
        //     return response.text(); // Mengubah respons menjadi teks
        // })
        .catch(error => {
            console.error('Error:', error);
        });
    }

</script>